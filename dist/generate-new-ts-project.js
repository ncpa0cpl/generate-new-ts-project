#!/usr/bin/env bun
"use strict";var Zr=Object.create;var Et=Object.defineProperty;var Xr=Object.getOwnPropertyDescriptor;var tn=Object.getOwnPropertyNames;var en=Object.getPrototypeOf,rn=Object.prototype.hasOwnProperty;var nn=(r,t,e)=>t in r?Et(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var i=(r,t)=>Et(r,"name",{value:t,configurable:!0});var sn=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var on=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of tn(t))!rn.call(r,o)&&o!==e&&Et(r,o,{get:()=>t[o],enumerable:!(n=Xr(t,o))||n.enumerable});return r};var d=(r,t,e)=>(e=r!=null?Zr(en(r)):{},on(t||!r||!r.__esModule?Et(e,"default",{value:r,enumerable:!0}):e,r));var L=(r,t,e)=>nn(r,typeof t!="symbol"?t+"":t,e);var Re=sn((Ii,De)=>{"use strict";function Nn(r,t){var e=r;t.slice(0,-1).forEach(function(o){e=e[o]||{}});var n=t[t.length-1];return n in e}i(Nn,"hasKey");function ke(r){return typeof r=="number"||/^0x[0-9a-f]+$/i.test(r)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(r)}i(ke,"isNumber");function Ae(r,t){return t==="constructor"&&typeof r[t]=="function"||t==="__proto__"}i(Ae,"isConstructorOrProto");De.exports=function(r,t){t||(t={});var e={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(e.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?e.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(p){e.bools[p]=!0});var n={};function o(p){return n[p].some(function(N){return e.bools[N]})}i(o,"aliasIsBoolean"),Object.keys(t.alias||{}).forEach(function(p){n[p]=[].concat(t.alias[p]),n[p].forEach(function(N){n[N]=[p].concat(n[p].filter(function(G){return N!==G}))})}),[].concat(t.string).filter(Boolean).forEach(function(p){e.strings[p]=!0,n[p]&&[].concat(n[p]).forEach(function(N){e.strings[N]=!0})});var s=t.default||{},a={_:[]};function c(p,N){return e.allBools&&/^--[^=]+$/.test(N)||e.strings[p]||e.bools[p]||n[p]}i(c,"argDefined");function g(p,N,G){for(var w=p,Nt=0;Nt<N.length-1;Nt++){var R=N[Nt];if(Ae(w,R))return;w[R]===void 0&&(w[R]={}),(w[R]===Object.prototype||w[R]===Number.prototype||w[R]===String.prototype)&&(w[R]={}),w[R]===Array.prototype&&(w[R]=[]),w=w[R]}var $=N[N.length-1];Ae(w,$)||((w===Object.prototype||w===Number.prototype||w===String.prototype)&&(w={}),w===Array.prototype&&(w=[]),w[$]===void 0||e.bools[$]||typeof w[$]=="boolean"?w[$]=G:Array.isArray(w[$])?w[$].push(G):w[$]=[w[$],G])}i(g,"setKey");function h(p,N,G){if(!(G&&e.unknownFn&&!c(p,G)&&e.unknownFn(G)===!1)){var w=!e.strings[p]&&ke(N)?Number(N):N;g(a,p.split("."),w),(n[p]||[]).forEach(function(Nt){g(a,Nt.split("."),w)})}}i(h,"setArg"),Object.keys(e.bools).forEach(function(p){h(p,s[p]===void 0?!1:s[p])});var I=[];r.indexOf("--")!==-1&&(I=r.slice(r.indexOf("--")+1),r=r.slice(0,r.indexOf("--")));for(var b=0;b<r.length;b++){var m=r[b],f,C;if(/^--.+=/.test(m)){var V=m.match(/^--([^=]+)=([\s\S]*)$/);f=V[1];var qt=V[2];e.bools[f]&&(qt=qt!=="false"),h(f,qt,m)}else if(/^--no-.+/.test(m))f=m.match(/^--no-(.+)/)[1],h(f,!1,m);else if(/^--.+/.test(m))f=m.match(/^--(.+)/)[1],C=r[b+1],C!==void 0&&!/^(-|--)[^-]/.test(C)&&!e.bools[f]&&!e.allBools&&(!n[f]||!o(f))?(h(f,C,m),b+=1):/^(true|false)$/.test(C)?(h(f,C==="true",m),b+=1):h(f,e.strings[f]?"":!0,m);else if(/^-[^-]+/.test(m)){for(var A=m.slice(1,-1).split(""),xt=!1,E=0;E<A.length;E++){if(C=m.slice(E+2),C==="-"){h(A[E],C,m);continue}if(/[A-Za-z]/.test(A[E])&&C[0]==="="){h(A[E],C.slice(1),m),xt=!0;break}if(/[A-Za-z]/.test(A[E])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(C)){h(A[E],C,m),xt=!0;break}if(A[E+1]&&A[E+1].match(/\W/)){h(A[E],m.slice(E+2),m),xt=!0;break}else h(A[E],e.strings[A[E]]?"":!0,m)}f=m.slice(-1)[0],!xt&&f!=="-"&&(r[b+1]&&!/^(-|--)[^-]/.test(r[b+1])&&!e.bools[f]&&(!n[f]||!o(f))?(h(f,r[b+1],m),b+=1):r[b+1]&&/^(true|false)$/.test(r[b+1])?(h(f,r[b+1]==="true",m),b+=1):h(f,e.strings[f]?"":!0,m))}else if((!e.unknownFn||e.unknownFn(m)!==!1)&&a._.push(e.strings._||!ke(m)?m:Number(m)),t.stopEarly){a._.push.apply(a._,r.slice(b+1));break}}return Object.keys(s).forEach(function(p){Nn(a,p.split("."))||(g(a,p.split("."),s[p]),(n[p]||[]).forEach(function(N){g(a,N.split("."),s[p])}))}),t["--"]?a["--"]=I.slice():I.forEach(function(p){a._.push(p)}),a}});var an=Object.defineProperty,cn=i((r,t,e)=>t in r?an(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),Qt=i((r,t,e)=>(cn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField");function pn(){return{read(){let r="",t=process.stdin,e=t.readableEncoding??void 0;t.setEncoding("utf8");let n=i(o=>{r+=o},"onData");return t.on("data",n),new Promise(o=>{t.once("end",()=>{t.removeListener("data",n),t.setEncoding(e),o(r)})})},getIterator(){let r=!1,t=[],e=[],n=process.stdin,o=i(a=>{let c=t.shift();c?c(a):e.push(a)},"onData"),s=i(()=>{r=!0,n.removeListener("data",o),t.splice(0,t.length).forEach(a=>a(e.shift()))},"onEnd");return n.on("data",o),n.once("end",s),{done(){return r&&!e.length},next(){return e.length?Promise.resolve(e.shift()):r?Promise.resolve("done"):new Promise(a=>{t.push(c=>a(c||"done"))})}}}}}i(pn,"defaultStdinReader");function ln(){return process.argv.slice(2)}i(ln,"defaultArgGetter");function un(r,t){switch(r){case"info":console.log(...t);break;case"error":console.error(...t);break;case"warning":console.warn(...t);break}}i(un,"defaultLogger");var Q,v=(Q=class{static setArgGetter(t){this.argGetter=t}static setLogger(t){this.logger=t}static setStdinReader(t){this.getStdinReader=t}static getArgs(){return this.argGetter()}static err(...t){this.logger("error",t)}static log(...t){this.logger("info",t)}static warn(...t){this.logger("warning",t)}static getStdin(){return this.getStdinReader()}},i(Q,"ClifyGlobals"),Q);Qt(v,"getStdinReader",pn);Qt(v,"argGetter",ln);Qt(v,"logger",un);var Oe=v;var mn=Object.defineProperty,fn=i((r,t,e)=>t in r?mn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),dn=i((r,t,e)=>(fn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),Z,It=(Z=class extends Error{constructor(t,e){super(t),this.optionName=e,dn(this,"customMessage")}toPrintable(){return`${this.customMessage??this.message}: ${this.optionName}`}},i(Z,"OptionError"),Z),X,B=(X=class extends It{constructor(t,e,n,o){super(n?`Invalid option, expected '${n}', but received '${e}'`:"Invalid option",t),this.received=e,this.expected=n,this.customMessage=o,this.name="InvalidOptionError"}},i(X,"InvalidOptionError"),X),tt,Pe=(tt=class extends It{constructor(t){super("Unspecified option",t),this.optionName=t,this.name="UnspecifiedOptionError"}},i(tt,"UnspecifiedOptionError"),tt);function _t(r,t,e){if(Array.isArray(t)){if(!Array.isArray(r)){let o=_t(r,t[0],e);return typeof o=="object"?o:[o]}let n=[];for(let o of r){let s=_t(o,t[0],e);if(typeof s=="object")return s;n.push(s)}return n}else{if(Array.isArray(r))return new B(e,"single value","multiple");switch(t){case"string":return String(r);case"boolean":return typeof r!="boolean"?new B(e,"boolean",typeof r):r;case"number":return typeof r!="number"||Number.isNaN(r)?new B(e,"number",typeof r):r;case"int":return typeof r!="number"||Number.isNaN(r)?new B(e,"integer",typeof r):Number.isInteger(r)?r:new B(e,"integer","float");case"unknown":return r}}throw Error("unreachable")}i(_t,"convertOptionValue");var gn=Object.defineProperty,hn=i((r,t,e)=>t in r?gn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),Ft=i((r,t,e)=>(hn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),Zt=Symbol("default_category"),K,wn=(K=class{constructor(t){this.command=t,Ft(this,"initParams"),Ft(this,"_value"),Ft(this,"_isSet",!1),Ft(this,"_default"),this.initParams=this.getInitParams()}static define(t){return class extends K{getInitParams(){return t}}}get value(){return this._isSet?this._value:this._default}get isSet(){return this._isSet}setDefault(t){return this._default=t,this}init(){let t=this.getName(),e=this.command.getParsedArgs();if(this._default=this.initParams.default,this.initParams.name in e){let n=_t(e[this.initParams.name],this.initParams.type,t);if(n instanceof It)return n;this._isSet=!0,this._value=n}else if(this.initParams.char!=null&&this.initParams.char in e){this._isSet=!0;let n=_t(e[this.initParams.char],this.initParams.type,t);if(n instanceof It)return n;this._isSet=!0,this._value=n}else if(this.initParams.required&&this._default==null)return new Pe(t);return this.validate()}validate(){if(this.initParams.validate&&this._isSet){let t=this.initParams.validate(this.value);return t==="ok"?null:new B(this.getName(),String(this.value),t.expected,t.message)}return null}nameMatches(t){return this.initParams.name===t||t.length===1&&this.initParams.char===t}getName(){return this.initParams.char!=null?`--${this.initParams.name}, -${this.initParams.char}`:`--${this.initParams.name}`}getNameWithType(){if(this.initParams.type==="boolean")return this.initParams.char!=null?`--${this.initParams.name}, -${this.initParams.char}`:`--${this.initParams.name}`;let t;return Array.isArray(this.initParams.type)?t="..."+this.initParams.type[0]:t=this.initParams.type,this.initParams.char!=null?`--${this.initParams.name}, -${this.initParams.char} <${t}>`:`--${this.initParams.name} <${t}>`}getDescription(){return this.initParams.description||""}getCategory(){return this.initParams.category==null?Zt:this.initParams.category}},i(K,"_Opt"),K);function Y(r){return wn.define(r)}i(Y,"defineOption");var bn=Object.defineProperty,yn=i((r,t,e)=>t in r?bn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),Mt=i((r,t,e)=>(yn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),et,Te=(et=class{constructor(t,e={}){this.command=t,this.options=e,Mt(this,"argumentInput",null),Mt(this,"stdinInput",null),Mt(this,"_source",null)}setOptions(t){this.options=t}setArgumentInput(t){this.argumentInput=t,t!=null&&(this._source="argument")}async prepare(){return!(this.argumentInput!=null||this.options.stdin===!1||this.options.stdin==="non-tty-only"&&process.stdin.isTTY)}validate(){return this.argumentInput!=null||this.stdinInput!=null}get(){}getName(){return this.options.name}get source(){return this._source}},i(et,"CmdInputBase"),et),rt,xe=(rt=class extends Te{async prepare(){if(await super.prepare()){let t=v.getStdin();return this._source="stdin",this.stdinInput=await t.read(),!0}return!1}get(){return this.argumentInput??this.stdinInput??null}},i(rt,"CmdInput"),rt),nt,Ee=(nt=class extends Te{constructor(){super(...arguments),Mt(this,"stdinIter",null)}async prepare(){if(await super.prepare()){let t=v.getStdin();return this._source="stdin",this.stdinIter=await t.getIterator(),!0}return!1}get(){return this.argumentInput??this.stdinIter??null}},i(nt,"CmdInputStream"),nt);var Cn=Object.defineProperty,vn=i((r,t,e)=>t in r?Cn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),it=i((r,t,e)=>(vn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),Fe=i((r,t)=>r.localeCompare(t),"alphasort"),z,Me=(z=class{constructor(t,e){this.cmdName=t,this.parentCommand=e,it(this,"ownOptions",[]),it(this,"ownAction"),it(this,"subCommands",[]),it(this,"parsedArgs"),it(this,"ownInput"),it(this,"description","")}command(t,e){let n=new z(t,this);return n.ownAction=e(n),this.subCommands.push(n),n}option(t){let e=new t(this);return this.ownOptions.push(e),e}input(t){return this.ownInput!=null?(t!=null&&this.ownInput.setOptions(t),this.ownInput):this.ownInput=new xe(this,t)}inputStream(t){return this.ownInput!=null?(t!=null&&this.ownInput.setOptions(t),this.ownInput):this.ownInput=new Ee(this,t)}setDescription(t){this.description=t}findSubcommand(t){if(t.length===0)return[this,null];let[e]=t,n=this.subCommands.find(o=>o.cmdName===e);return n==null?this.ownInput&&t.length===1?[this,t[0]]:[null,null]:n.findSubcommand(t.slice(1))}getName(){let t=this.parentCommand?.getName();return t!=null?t+" "+this.cmdName:this.cmdName}printHelp(){let t=v.log.bind(v),e=`Usage: ${this.getName()}`,n=0;this.subCommands.length>0&&(n|=1),this.ownInput&&(n|=2),this.ownAction&&(n|=4);let o=this.ownInput?.getName()??"INPUT";switch(n){case 0:case 4:break;case 2:case 6:e+=` ${o}`;break;case 1:e+=" COMMAND";break;case 5:e+=" COMMAND?";break;case 3:e+=` COMMAND|${o}`;break;case 7:e+=` COMMAND|${o}?`;break}this.ownOptions.length>0&&(e+=" [...OPTIONS]");let s=[];if(this.subCommands.length>0){let g=this.subCommands.map(I=>`  ${I.cmdName}`),h=g.reduce((I,b)=>I.length>b.length?I:b,"").length;s=g.map((I,b)=>I.padEnd(h+4)+this.subCommands[b].description).sort(Fe)}let a=[],c=[];if(this.ownOptions.length>0){let g=Object.groupBy(this.ownOptions,h=>h.getCategory());for(let h of Reflect.ownKeys(g)){let I=g[h],b=I.map(C=>`  ${C.getNameWithType()}`),m=b.reduce((C,V)=>C.length>V.length?C:V,"").length,f=b.map((C,V)=>C.padEnd(m+4)+I[V].getDescription()).sort(Fe);h===Zt?a=f:c.push([h,f])}}if(t(e),this.description&&(t(""),t(this.description)),s.length>0){t(""),t("Commands:");for(let g of s)t(g)}if(a.length>0||c.length>0){t(""),t("Options:");for(let g of a)t(g);for(let[g,h]of c){t(""),t(g+":");for(let I of h)t(I)}}}printUnknownArgsMsg(t){let e=v.err.bind(v);e("Unknown options:"),t.forEach(n=>{n.length===1?e(`  -${n}`):e(`  --${n}`)})}printArgumentErrors(t){let e=v.err.bind(v);e("Invalid options:"),t.forEach(n=>{e(`  ${n.toPrintable()}`)})}async prepare(){if("help"in this.parsedArgs)return this.printHelp(),"skip";let t=Object.keys(this.parsedArgs).filter(o=>o!=="_"&&o!=="__"),e=[];for(let o=0;o<t.length;o++){let s=t[o];this.ownOptions.some(a=>a.nameMatches(s))||e.push(s)}if(e.length>0)return this.printUnknownArgsMsg(e),"fail";let n=[];for(let o=0;o<this.ownOptions.length;o++){let s=this.ownOptions[o].init();s!=null&&n.push(s)}return n.length>0?(this.printArgumentErrors(n),"fail"):this.ownInput?(await this.ownInput.prepare(),this.ownInput.validate()?"ok":"fail"):"ok"}runAction(){return this.ownAction==null?(v.warn("Nothing to do."),Promise.resolve(new Error("Nothing to do."))):this.ownAction()}getParsedArgs(){return this.parsedArgs}async start(t,e){this.parsedArgs=t,this.ownInput?.setArgumentInput(e);let n=await this.prepare();if(n==="ok")return this.runAction();if(n==="fail")return Promise.resolve(new Error("Command failed"))}},i(z,"_Cmd"),z);var je=d(Re(),1);var st,Ge=(st=class{constructor(t){this.mainCommand=t}init(t,e){return t!=null?{_:t.split(" "),...e}:(0,je.default)(v.getArgs())}findCommand(t){return this.mainCommand.findSubcommand(t)}run(t,e){let n=this.init(t,e);if(n.version)return this.mainCommand.printVersionInfo(),Promise.resolve();let[o,s]=this.findCommand(n._);if(o==null){let a=`Unknown command: ${n._.join(" ")}`;return v.err(a),Promise.resolve(new Error(a))}return o.start(n,s)}},i(st,"ClifyProgram"),st);function $e(r,t){if(r instanceof Promise)throw new Error(`'${t}' cannot be asynchronous.`)}i($e,"assertNotAsync");var In=Object.defineProperty,_n=i((r,t,e)=>t in r?In(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),Le=i((r,t,e)=>(_n(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),ot,Sn=(ot=class extends Me{constructor(){super(...arguments),Le(this,"version"),Le(this,"programName")}printVersionInfo(){let t="";this.programName!=null&&(t=`${this.programName} `),this.version!=null&&(t+=`${this.version} `),v.log(t)}setVersion(t){this.version=t}setName(t){this.programName=t}main(t){this.ownAction=t(this)}getName(){return this.programName??""}},i(ot,"MainCmd"),ot);function Je(r){let t=new Sn("");return $e(r(t),"configureCallback"),new Ge(t)}i(Je,"configure");var On={Clify:Oe,configure:Je,defineOption:Y},Ue=On;var Qr=d(require("path"));var Er=d(require("path"));var Xt=class Xt{constructor(t,e,n="."){this.getContent=t;this.filename=e;this.location=n}getAsString(t){let e=this.getContent(t);return typeof e=="string"?e:JSON.stringify(e,null,2)}};i(Xt,"ConfigFile");var u=Xt;var at=class at{constructor(t,e={}){this.name=t;this.options=e;var n,o;(n=this.options).register??(n.register="npm"),(o=this.options).version??(o.version="latest")}static setPackageManagerType(t,e=""){this.pmType=t,this.pmVersion=e}getNameForNpmRegister(){return!this.options.version||this.options.version==="latest"?this.name:`${this.name}@${this.options.version}`}getNameForGithubRegister(){let t;return at.pmType==="bun"?t=`git@github.com:${this.options.user}/${this.name}.git`:at.pmType==="yarn"&&at.pmVersion.startsWith("3")?t=`${this.name}@${this.options.user}/${this.name}`:t=`git+https://github.com/${this.options.user}/${this.name}`,this.options.version&&this.options.version!=="latest"&&(t+=`#${this.options.version}`),t}getFriendlyName(){return this.options.version==="latest"?this.name:`${this.name} v${this.options.version}`}getInstallName(){return this.options.register==="github"?this.getNameForGithubRegister():this.getNameForNpmRegister()}};i(at,"Dependency");var l=at;var F=i(r=>typeof r=="object"&&r!==null,"isRecord");var Be={lineWidth:80,typescript:{},json:{},markdown:{},excludes:["**/node_modules","**/*-lock.json","**/dist"],plugins:["https://plugins.dprint.dev/typescript-0.88.7.wasm","https://plugins.dprint.dev/json-0.19.1.wasm","https://plugins.dprint.dev/markdown-0.16.3.wasm"]};var te=class te{getName(){return"dprint"}getDevDependencies(){return[new l("dprint")]}getConfigFiles(){return[new u(()=>Be,"dprint.json")]}packageJsonMiddleware(t){return t.addScript("fix:fmt","dprint fmt"),t.addScript("test:fmt","dprint check"),t}beforeWriteFile(t,e){t==="git-hook-tasks.config.json"&&F(e)&&e.hooks["pre-push"].push({name:"Check Formatting",script:"test:fmt"})}};i(te,"DprintModule");var kt=te;var We=d(require("fs/promises")),Ve=d(require("path"));var j=i((...r)=>{let t=r[0],e="",n=0,o=0;for(e=t[0],n=1,o=r.length;n<o;n++)e+=String(r[n])+t[n];return e.trim()+`
`},"js");var He=j`
import esbuild from "esbuild";
import path from "node:path";
import { fileURLToPath } from "url";

const __dirname = path.dirname(fileURLToPath(import.meta.url));
const p = (...fpath) => path.resolve(__dirname, "..", ...fpath);

const isDev = process.argv.includes("--dev");
const watch = process.argv.includes("--watch");

async function main() {
  /** 
   * @type {import("esbuild").BuildOptions} 
   */
  const bldOptions = {
    tsconfig: p("tsconfig.json"),
    entryPoints: [p("src/index.ts")],
    outdir: p("dist"),
    bundle: true,
    keepNames: true,
    treeShaking: !isDev,
    minify: !isDev,
  }

  if (watch) {
    const buildCtx = await esbuild.context(bldOptions);
    await buildCtx.watch();
  } else {
    await esbuild.build(bldOptions);
  }
}

main().catch((err) => {
  console.error(err);
  process.exit(1);
});
`;var ee=class ee{getName(){return"esbuild"}async beforeStart(t){let e=Ve.default.resolve(t.projectDir,"scripts");await We.default.mkdir(e)}getDevDependencies(){return[new l("esbuild")]}getConfigFiles(){return[new u(()=>He,"build.mjs","scripts")]}packageJsonMiddleware(t){return t.addScript("build","node ./scripts/build.mjs"),t}};i(ee,"EsbuildModule");var At=ee;var Ke=["/__mocks__","/__tests__","/.vscode","/coverage","/dist","/node_modules","/tests","/.eslintignore","/.eslintrc.json","/.gitignore","/.prettierrc.json","/jest.config.js","/package-lock.json","/tsconfig.json","/webpack.config.js","/yarn-error.log","/yarn.lock","/*.js","/*.mjs","/*.cjs","/scripts"].join(`
`);var Ye={plugins:["@typescript-eslint"],env:{browser:!0,es2021:!0},extends:["prettier","eslint:recommended","plugin:@typescript-eslint/eslint-recommended","plugin:@typescript-eslint/recommended"],parser:"@typescript-eslint/parser",parserOptions:{project:"./tsconfig.json",sourceType:"module"},rules:{"max-len":["error",70,4,{ignoreUrls:!0,ignoreStrings:!0,ignoreRegExpLiterals:!0,ignoreTemplateLiterals:!0}],"linebreak-style":["error","unix"],quotes:["error","double",{avoidEscape:!0}],semi:["error","always"],"@typescript-eslint/consistent-type-imports":"error","@typescript-eslint/consistent-type-exports":"error","@typescript-eslint/member-delimiter-style":"error","@typescript-eslint/no-confusing-non-null-assertion":"error","@typescript-eslint/no-misused-new":"error","@typescript-eslint/no-require-imports":"error","@typescript-eslint/restrict-plus-operands":"error","@typescript-eslint/switch-exhaustiveness-check":"error","@typescript-eslint/no-base-to-string":"error","@typescript-eslint/prefer-nullish-coalescing":"warn","@typescript-eslint/require-array-sort-compare":"warn","@typescript-eslint/no-empty-interface":"off","@typescript-eslint/prefer-for-of":"off","@typescript-eslint/no-this-alias":"off","@typescript-eslint/no-non-null-assertion":"off","@typescript-eslint/no-explicit-any":"off","@typescript-eslint/unbound-method":"off","@typescript-eslint/explicit-module-boundary-types":"off","no-async-promise-executor":"off","@typescript-eslint/no-floating-promises":"off","@typescript-eslint/no-empty-function":"off","@typescript-eslint/no-namespace":"off","@typescript-eslint/ban-ts-comment":"off","no-constant-condition":"off","no-prototype-builtins":"off","no-control-regex":"off","@typescript-eslint/ban-types":["error",{types:{object:!1,Function:!1,"{}":!1},extendDefaults:!0}]}};var re=class re{getName(){return"eslint"}getDevDependencies(){return[new l("@typescript-eslint/eslint-plugin"),new l("@typescript-eslint/parser"),new l("eslint-config-prettier"),new l("eslint-plugin-prettier"),new l("eslint")]}getConfigFiles(){return[new u(()=>Ye,".eslintrc.json"),new u(()=>Ke,".eslintignore")]}packageJsonMiddleware(t){return t.addScript("fix:lint","eslint --fix ./src/**/*.ts"),t.addScript("test:lint","eslint ./src/**/*.ts"),t}beforeWriteFile(t,e){t==="git-hook-tasks.config.json"&&F(e)&&e.hooks["pre-push"].push({name:"Lint",script:"test:lint"})}};i(re,"EslintModule");var Dt=re;var qe=d(require("fs/promises")),Qe=d(require("path"));var ze=j`
/** @type {import("@reactgjs/gest/config").ConfigGetter} */
const getConfig = () => {
    return {
        testDir: "./__tests__",
        srcDir: "./src",
    };
};

export default getConfig;
`;var ct={extends:"../tsconfig.json",include:["../**/*"],compilerOptions:{rootDir:"..",noEmit:!0}};var ne=class ne{getName(){return"gest"}async beforeStart(t){let e=Qe.default.resolve(t.projectDir,"__tests__");await qe.default.mkdir(e)}getDevDependencies(){return[new l("@reactgjs/gest")]}getConfigFiles(){return[new u(()=>ze,"gest.config.mjs"),new u(()=>ct,"tsconfig.json","__tests__")]}packageJsonMiddleware(t){return t.addScript("test:unit","gest"),t}beforeWriteFile(t,e){t==="git-hook-tasks.config.json"&&F(e)&&e.hooks["pre-push"].push({name:"Unit Tests",script:"test:unit"})}};i(ne,"GestModule");var Rt=ne;var tr=d(require("fs/promises")),er=d(require("path"));var Ze=j`
const fs = require("fs");
const path = require("path");

const swcConfig = JSON.parse(
  fs.readFileSync(path.resolve(__dirname, ".swcrc"), "utf-8")
);

/** @type {import("jest").Config} */
const config = {
  testRegex: ".*__tests__/.+(\\.test\\.(ts|js|tsx|jsx))$",
  transform: {
    "^.+\\.(js|jsx|ts|tsx)$": ["@swc/jest", swcConfig],
  },
  roots: ["<rootDir>"],
  collectCoverageFrom: ["src/**/*.(ts|js|tsx|jsx)"],
  coverageReporters: ["html", "text"],
  coverageThreshold: {
    global: {
      branches: 0,
      functions: 0,
      lines: 0,
      statements: 0,
    },
  },
  coveragePathIgnorePatterns: [
    "/node_modules/",
    "/coverage/",
    "/__mocks__/",
    "/__tests__/",
    "/dist/",
    "/.husky/",
    "/.vscode/",
  ],
};

module.exports = config;
`.trim()+`
`;var Xe={jsc:{keepClassNames:!0,parser:{syntax:"typescript",tsx:!0,decorators:!0,dynamicImport:!1},target:"es2022",baseUrl:"."},module:{type:"es6",strict:!0}};var ie=class ie{getName(){return"jest"}async beforeStart(t){let e=er.default.resolve(t.projectDir,"__tests__");await tr.default.mkdir(e)}getDevDependencies(){return[new l("@swc/core"),new l("@swc/jest"),new l("@types/jest"),new l("jest")]}getConfigFiles(){return[new u(()=>Ze,"jest.config.js"),new u(()=>Xe,".swcrc"),new u(()=>ct,"tsconfig.json","__tests__")]}packageJsonMiddleware(t){return t.addScript("test:unit","jest --coverage"),t}beforeWriteFile(t,e){t==="git-hook-tasks.config.json"&&F(e)&&e.hooks["pre-push"].push({name:"Unit Tests",script:"test:unit"})}};i(ie,"JestModule");var jt=ie;var Cr=d(require("fs/promises")),me=d(require("path"));var Pn=Object.defineProperty,Tn=i((r,t,e)=>t in r?Pn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),xn=i((r,t,e)=>(Tn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),pt,St=(pt=class{static parseRgbArgs(t){if(t.length===1){let e=t[0];if(typeof e=="string"){if(e.startsWith("rgb(")){let n=e.slice(4,-1).split(",");return{r:Number(n[0]),g:Number(n[1]),b:Number(n[2])}}else if(e.startsWith("#")){let n=e.slice(1).split("");return{r:parseInt(n[0]+n[1],16),g:parseInt(n[2]+n[3],16),b:parseInt(n[4]+n[5],16)}}}else if(typeof e=="object")return e}else if(t.length===3)return{r:t[0],g:t[1],b:t[2]};throw new Error("Invalid rgb arguments")}static get(t){return t in this.predefinedColors?this.predefinedColors[t]:this.rgb(t)}static define(t,...e){if(t in this.predefinedColors)throw new Error(`Color ${t} is already defined.`);Object.assign(this.predefinedColors,{[t]:this.rgb(...e)})}static rgb(...t){return""}},i(pt,"TermxColors"),pt);xn(St,"predefinedColors",{});var En=Object.defineProperty,Fn=i((r,t,e)=>t in r?En(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),Mn=i((r,t,e)=>(Fn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),S="\x1B",lt,Gt=(lt=class extends St{static rgb(...t){let e=this.parseRgbArgs(t);return`${S}[48;2;${e.r};${e.g};${e.b}m`}},i(lt,"TermxBgColor"),lt);Mn(Gt,"predefinedColors",{unset:`${S}[0m`,red:`${S}[41m`,green:`${S}[42m`,yellow:`${S}[43m`,blue:`${S}[44m`,magenta:`${S}[45m`,cyan:`${S}[46m`,white:`${S}[47m`,lightRed:`${S}[101m`,lightGreen:`${S}[102m`,lightYellow:`${S}[103m`,lightBlue:`${S}[104m`,lightMagenta:`${S}[105m`,lightCyan:`${S}[106m`,lightWhite:`${S}[107m`});var kn=Object.defineProperty,An=i((r,t,e)=>t in r?kn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),Dn=i((r,t,e)=>(An(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),O="\x1B",ut,M=(ut=class extends St{static rgb(...t){let e=this.parseRgbArgs(t);return`${O}[38;2;${e.r};${e.g};${e.b}m`}},i(ut,"TermxFontColor"),ut);Dn(M,"predefinedColors",{unset:`${O}[0m`,red:`${O}[31m`,green:`${O}[32m`,yellow:`${O}[33m`,blue:`${O}[34m`,magenta:`${O}[35m`,cyan:`${O}[36m`,white:`${O}[37m`,lightRed:`${O}[91m`,lightGreen:`${O}[92m`,lightYellow:`${O}[93m`,lightBlue:`${O}[94m`,lightMagenta:`${O}[95m`,lightCyan:`${O}[96m`,lightWhite:`${O}[97m`});function D(...r){let t=r[0],e="",n=0,o=0;for(e=t[0],n=1,o=r.length;n<o;n++)typeof r[n]=="object"&&r[n]!==null&&r[n].name==="RawHtml"?e+=r[n].toString()+t[n]:e+=Rn(r[n].toString())+t[n];return e}i(D,"html");function Rn(r){return r.replace(/</g,"&lt;").replace(/>/g,"&gt;")}i(Rn,"sanitizeHtml");function rr(r){return r.replace(/&lt;/g,"<").replace(/&gt;/g,">")}i(rr,"desanitizeHtml");var ft,H=(ft=class extends Error{constructor(t,e,n){super("Invalid Markup. "+n),this.parsedMarkup=t,this.position=e}getPositionCords(){let t=0,e=0;for(let n=0;n<this.position;n++)this.parsedMarkup[n]===`
`?(t++,e=0):e++;return[t,e]}getStack(){return this.stack??""}getPositionPatch(){let[t,e]=this.getPositionCords(),n=this.parsedMarkup.split(`
`),o=n[t],s=" ".repeat(e)+"^",a="";return t>1&&(a+=n[t-2]+`
`),t>0&&(a+=n[t-1]+`
`),a+=o+`
`+s,a}toString(){return`${this.message}

${this.getPositionPatch()}

${this.getStack()}`}},i(ft,"MarkupParserError"),ft),dt,ir=(dt=class{constructor(t){L(this,"o",{textNode:!1,tag:"",attributes:[],content:[]});L(this,"content",[]);L(this,"lastStringContent","");this.parent=t}addChild(){this.lastStringContent.length&&(this.content.push(this.lastStringContent),this.lastStringContent="");let t=new ir(this);return this.content.push(t),t}addChar(t){this.lastStringContent+=t}serialize(){for(let t=0;t<this.content.length;t++){let e=this.content[t];typeof e=="string"?this.o.content.push(e):this.o.content.push(e.serialize())}return this.lastStringContent.length&&this.o.content.push(this.lastStringContent),this.o}},i(dt,"MarkupNodeBuilder"),dt),gt,jn=(gt=class{constructor(){L(this,"node",new ir);this.node.o.textNode=!0}addChildNode(){this.node=this.node.addChild()}moveUp(){this.node=this.node.parent}isTopLevel(){return this.node.parent===void 0}serialize(){return this.node.content.length===1&&this.node.o.tag===""&&typeof this.node.content[0]!="string"?this.node.content[0].serialize():this.node.serialize()}},i(gt,"MarkupBuilder"),gt),sr=1,or=2,ar=4,oe=8,cr=16,ae=32,mt=~sr,$t=~or,Gn=~ar,nr=~oe,$n=~cr,se=~ae;function ce(r){let t=new jn,e="",n="",o="",s=0;for(let a=0;a<r.length;a++){let c=r[a];switch(s){case 0:{switch(c){case"<":{s=s|sr,r[a+1]==="/"?(s=s|cr,a++):t.addChildNode();continue}case"\\":{s=s|oe;continue}}t.node.addChar(c);break}case 8:{t.node.addChar(c),s=s&nr;break}case 1:{switch(c){case`
`:{t.node.o.tag.length>0&&(s=s|ae);continue}case" ":{t.node.o.tag.length>0&&(s=s|ae);continue}case">":{if(t.node.o.tag.length===0)throw new H(r,a,"No tag name found.");s=s&mt;continue}case"/":{if(r[a+1]===">")s=s&mt,a++,t.moveUp();else throw new H(r,a,"Invalid character encountered.");continue}case"=":throw new H(r,a-t.node.o.tag.length,"No tag name found.")}t.node.o.tag+=c;break}case 33:{switch(c){case`
`:continue;case" ":continue;case">":{s=s&mt&se;continue}case"/":{if(r[a+1]===">")s=s&mt&se,a++,t.moveUp();else throw new H(r,a,"Invalid character encountered.");continue}case"=":throw new H(r,a,"Invalid character encountered.")}s=s|or,e+=c;break}case 17:{switch(c){case`
`:continue;case" ":continue;case">":{if(s=s&mt&$n,o!==t.node.o.tag)throw new H(r,a,`Closing tag does not match opening tag, expected '${t.node.o.tag}' but found '${o}'.`);o="",t.moveUp();continue}}o+=c;break}case 35:{switch(c){case"=":{if(s=s&$t,r[a+1]==='"')s=s|ar,a+=1;else throw new H(r,a+1,"Attribute values must be enclosed in double quotes.");continue}case`
`:{s=s&$t,t.node.o.attributes.push([e,!0]),e="";continue}case" ":{s=s&$t,t.node.o.attributes.push([e,!0]),e="";continue}case">":{s=s&mt&$t&se,t.node.o.attributes.push([e,!0]),e="";continue}}e+=c;break}case 37:{switch(c){case'"':{s=s&Gn,t.node.o.attributes.push([e,n]),e="",n="";continue}case"\\":{s=s|oe;continue}}n+=c;break}case 45:{n+=c,s=s&nr;break}}}if(!t.isTopLevel())throw new H(r,r.length-1,`Closing tag is missing. Expected a close tag for '${t.node.o.tag}' before the end of the document.`);return t.serialize()}i(ce,"parseMarkup");var Lt=i((r,t,e=" ")=>{e=e[0]??" ";let n=e.repeat(t);return r.split(`
`).map(s=>`${n}${s}`).join(`
`)},"leftPad");var Ln=Object.defineProperty,Jn=i((r,t,e)=>t in r?Ln(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),pr=i((r,t,e)=>(Jn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),ht,lr=(ht=class{static get currentScope(){return this._currentScope}static enterScope(t){let e=t;this.scopeStack.push(e),this._currentScope=e}static exitScope(){this.scopeStack.pop(),this._currentScope=this.scopeStack[this.scopeStack.length-1]??{}}static traverseUp(t){for(let e=this.scopeStack.length-1;e>=0;e--)t(this.scopeStack[e])}},i(ht,"_ScopeTracker"),ht),_=lr;pr(_,"scopeStack",[{tag:""}]);pr(_,"_currentScope",lr.scopeStack[0]);var q="\x1B",Un=`${q}[1m`,Bn=`${q}[2m`,Hn=`${q}[3m`,Wn=`${q}[4m`,Vn=`${q}[5m`,Kn=`${q}[7m`,Yn=`${q}[9m`,wt,le=(wt=class{static defineColor(t,...e){Gt.define(t,...e),M.define(t,...e)}static format(t){let e=ce(t);return M.get("unset")+rr(this.formatMarkup(e))}static formatMarkup(t){let e="";switch(t.tag){case"li":case"pre":case"line":case"span":return _.enterScope(this.createScope(t)),e+=this.scopeToAnsi(_.currentScope)+this.join(t.content.map(n=>this.mapContents(n,t.tag==="pre"))),_.exitScope(),e+=M.get("unset"),t.tag==="line"&&(e+=`
`),e+=this.scopeToAnsi(_.currentScope),e;case"ol":case"ul":{let n=this.getListElementPrefix(t),o=this.getListPadding();return _.enterScope(this.createScope(t)),e+=this.scopeToAnsi(_.currentScope)+this.join(t.content.filter(s=>typeof s!="string"||s.trim().length).map((s,a)=>{if(typeof s=="string"||s.tag!=="li")throw new Error(`Invalid element inside <${t.tag}>. Each child of <${t.tag}> must be a <li> element.`);let{contentPad:c,firstLineOffset:g}=this.getContentPad(t,a+1),h=n(a)+Lt(this.mapContents(s),c).substring(g);return Lt(h,o)+`
`})),_.exitScope(),e+=M.get("unset")+this.scopeToAnsi(_.currentScope),e}case"pad":{_.enterScope(this.createScope(t));let n=this.getAttribute(t,"size")??0,o=this.scopeToAnsi(_.currentScope)+this.join(t.content.map(s=>this.mapContents(s)));return e+=Lt(o,Number(n)),_.exitScope(),e+=M.get("unset")+this.scopeToAnsi(_.currentScope),e}case"br":return e+`
`;case"s":return e+" ";case"":return e+=this.join(t.content.map(n=>this.mapContents(n))),e}throw new Error(`Invalid tag: <${t.tag}>`)}static join(t){let e="";for(let n=0;n<t.length;n++)e+=t[n];return e}static getAttribute(t,e){for(let[n,o]of t.attributes)if(n===e)return pe(o,"string")}static mapContents(t,e){return typeof t=="string"?e?t:t.replaceAll(`
`,"").trim():this.formatMarkup(t)}static getListPadding(){let t=0;return _.traverseUp(e=>{(e.tag==="ol"||e.tag==="ul")&&(t+=1)}),t===0?0:(t-1)*2}static getContentPad(t,e){if(t.tag==="ul")return{contentPad:2,firstLineOffset:2};let n=t.content.length.toString().length,o=t.content.length.toString().length+2;return{contentPad:o,firstLineOffset:o-(n-e.toString().length)}}static getListElementPrefix(t){if(t.tag==="ol")return o=>`${o+1}. `;let e=this.getAttribute(t,"type")??"bullet",n=(()=>{switch(e){case"bullet":return"\u25CF";case"circle":return"\u25CB";case"square":return"\u25A1";default:throw new Error(`Invalid list type: ${e}`)}})();return()=>`${n} `}static scopeToAnsi(t){let e="";return t.noInherit&&(e+=M.get("unset")),t.color&&(e+=M.get(t.color)),t.bg&&(e+=Gt.get(t.bg)),t.bold&&(e+=Un),t.dimmed&&(e+=Bn),t.italic&&(e+=Hn),t.underscore&&(e+=Wn),t.blink&&(e+=Vn),t.inverted&&(e+=Kn),t.strikethrough&&(e+=Yn),e}static createScope(t){let n=t.attributes.some(([o,s])=>o==="no-inherit"&&(s===!0||s==="true"))?{noInherit:!0}:{..._.currentScope,noInherit:!1};t.tag&&(n.tag=t.tag);for(let[o,s]of t.attributes)switch(o){case"color":n.color=pe(s,"string");break;case"bg":n.bg=pe(s,"string");break;case"bold":n.bold=s===!0||s==="true";break;case"dim":n.dimmed=s===!0||s==="true";break;case"italic":n.italic=s===!0||s==="true";break;case"underscore":n.underscore=s===!0||s==="true";break;case"blink":n.blink=s===!0||s==="true";break;case"invert":n.inverted=s===!0||s==="true";break;case"strike":n.strikethrough=s===!0||s==="true";break}return n}},i(wt,"MarkupFormatter"),wt);function pe(r,t){if(typeof r===t)return r;throw new Error(`Invalid attribute type: ${typeof r} (expected ${t})`)}i(pe,"as");var zn=Object.defineProperty,qn=i((r,t,e)=>t in r?zn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,"__defNormalProp"),ue=i((r,t,e)=>(qn(r,typeof t!="symbol"?t+"":t,e),e),"__publicField"),bt,W=(bt=class{constructor(t){L(this,"_printFn");if(t)this._printFn=t;else if(W.defaultPrintFn)this._printFn=W.defaultPrintFn;else if(typeof print=="function")this._printFn=print;else if(typeof console<"u"&&console.log)this._printFn=e=>console.log(e);else throw new Error("Unable to detect print function for current environment.")}static print(...t){W.globalOutput.print(...t)}static println(...t){W.globalOutput.println(...t)}static setDefaultPrintMethod(t){W.defaultPrintFn=t,W.globalOutput=new W(t)}printError(t){t!=null&&(this._printFn(t.toString()+`
`),typeof t=="object"&&t.stack&&this._printFn(t.stack+`
`))}parseMarkupLines(t){let e=[];for(let n of t)e.push(le.format(n));return e}print(...t){try{let e=this.parseMarkupLines(t);for(let n of e)this._printFn(n)}catch(e){this._printFn(M.get("red")+"Failed to format/print given markup."+M.get("unset")+`
`),this.printError(e)}}println(...t){try{let e=this.parseMarkupLines(t);for(let n of e)this._printFn(n+`
`)}catch(e){this._printFn(M.get("red")+"Failed to format/print given markup."+M.get("unset")+`
`),this.printError(e)}}},i(bt,"_Output"),bt),P=W;ue(P,"defaultPrintFn");ue(P,"globalOutput");try{P.globalOutput=new P}catch{}var yt,Jt=(yt=class{constructor(t=P){L(this,"buffer",[]);this.output=t}static print(t){Jt.globalOutputBuffer.print(t)}static println(t){Jt.globalOutputBuffer.println(t)}print(...t){this.buffer.push(...t.map(e=>({type:"print",markup:e})))}println(...t){this.buffer.push(...t.map(e=>({type:"println",markup:e})))}flush(){for(let{type:t,markup:e}of this.buffer)switch(t){case"print":this.output.print(e);break;case"println":this.output.println(e);break}this.buffer=[]}pipe(t){return this.buffer.length===0||(t.buffer.push(...this.buffer),this.buffer=[]),t}pipeReverse(t){return t.buffer.length===0?this:(this.buffer.push(...t.buffer),t.buffer=[],this)}},i(yt,"_OutputBuffer"),yt),ur=Jt;ue(ur,"globalOutputBuffer",new Jt);var mr=i(async r=>{P.print(D`
    <span color="lightGreen">Configuring:</span>
    <pre> git-hook-tasks</pre>
  `),await r.run("git-hook-tasks","install","-p",r.getName())},"configureGitHookTasks");var fr=i(r=>{let t=[{name:"TypeScript",script:"test:tsc"}];return{packageManager:r.packageManager.getName(),parallel:!0,hooks:{"pre-push":t,"pre-commit":[],"post-commit":[]}}},"getGitHookTasksConfig");var dr=["/node_modules","/coverage","/dist","/yarn-error.log","/.yarn/cache","/.yarn/install-state.gz"].join(`
`);var gr=i(r=>`MIT License

  Copyright (c) ${new Date().getFullYear()}${r.authorName?` ${r.authorName}`:""}
  
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in all
  copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  SOFTWARE.`,"getLicense");var hr=`
//registry.npmjs.org/:_authToken=\${NPM_TOKEN}
`.trim();var wr=["/__mocks__","/__tests__","/.github","/.husky","/.vscode","/coverage","/scripts","/src","/.editorconfig","/.eslintignore","/.eslintrc.json","/.gitignore","/.prettierignore","/.prettierrc.json","/.yarn","/.yarnrc.yml","/git-hook-tasks.config.json","/jest.config.js","/tsconfig.json","/yarn-error.log"].join(`
`);var br={compilerOptions:{target:"ESNext",module:"ES6",moduleResolution:"node",jsx:"react",declaration:!0,outDir:"./dist",rootDir:"./src",downlevelIteration:!0,strict:!0,noUnusedLocals:!0,noUncheckedIndexedAccess:!0,esModuleInterop:!0,skipLibCheck:!0,forceConsistentCasingInFileNames:!0,isolatedModules:!0,noImplicitAny:!0},include:["src/**/*"]};var yr={"editor.formatOnSave":!0,"editor.codeActionsOnSave":["source.organizeImports","source.fixAll.eslint"]};var fe=class fe{getName(){return"Main"}async beforeStart(t){let e=me.default.resolve(t.projectDir,".vscode");switch(await Cr.default.mkdir(e),t.packageManager.getName()){case"yarn":{await t.packageManager.changeVersion("classic");break}case"bun":{await t.packageManager.run("init","--yes");break}}}getDevDependencies(t){return[new l("typescript"),new l("husky",{version:"~8"}),new l("git-hook-tasks",{register:"github",user:"ncpa0cpl",version:"4215793"})]}getConfigFiles(){return[new u(()=>dr,".gitignore"),new u(()=>br,"tsconfig.json"),new u(()=>hr,".npmrc"),new u(()=>wr,".npmignore"),new u(gr,"LICENSE"),new u(fr,"git-hook-tasks.config.json"),new u(()=>yr,"settings.json",".vscode")]}async afterEnd(t){if(t.packageManager.getName()!=="bun")await mr(t.packageManager);else{await t.packageManager.run("husky","install"),await t.packageManager.run("husky","add",".husky/pre-push",`"${await t.packageManager.generateCommand("git-hook-tasks pre-push")}"`);let e=Bun.file(me.default.join(t.packageManager.wd(),".husky/pre-push"));await Bun.write(e,await e.text().then(n=>n.replace(/\\/g,"")))}}};i(fe,"MainModule");var Ut=fe;var Nr=d(require("fs/promises")),Ir=d(require("path"));var vr=j`
import { build } from "@ncpa0cpl/nodepack";
import path from "node:path";
import { fileURLToPath } from "url";

const __dirname = path.dirname(fileURLToPath(import.meta.url));
const p = (...fpath) => path.resolve(__dirname, "..", ...fpath);

const isDev = process.argv.includes("--dev");
const watch = process.argv.includes("--watch");

async function main() {
  /**
   * @type {import("@ncpa0cpl/nodepack").BuildConfig}
   */
  const bldOptions = {
    tsConfig: p("tsconfig.json"),
    srcDir: p("src"),
    outDir: p("dist"),
    target: "ESNext",
    formats: ["esm", "cjs", "legacy"],
    declarations: true,
    watch: watch,
    esbuildOptions: {
      minify: !isDev,
      sourcemap: isDev ? "inline" : false,
    }
  }

  await build(bldOptions);
}

main().catch((err) => {
  console.error(err);
  process.exit(1);
});
`;var de=class de{getName(){return"nodepack"}async beforeStart(t){let e=Ir.default.resolve(t.projectDir,"scripts");await Nr.default.mkdir(e)}getDevDependencies(){return[new l("esbuild"),new l("@ncpa0cpl/nodepack")]}getConfigFiles(){return[new u(()=>vr,"build.mjs","scripts")]}packageJsonMiddleware(t){return t.addScript("build","node ./scripts/build.mjs"),t}};i(de,"NodepackModule");var Bt=de;var ge=class ge{getName(){return"oxlint"}getDevDependencies(){return[new l("oxlint")]}getConfigFiles(){return[]}packageJsonMiddleware(t){return t.addScript("fix:lint","oxlint --fix ./src"),t.addScript("test:lint","oxlint ./src"),t}beforeWriteFile(t,e){t==="git-hook-tasks.config.json"&&F(e)&&e.hooks["pre-push"].push({name:"Lint",script:"test:lint"})}};i(ge,"OxlintModule");var Ht=ge;var _r=["**/*.json"].join(`
`);var Sr=j`
/**
 * @type {import("prettier").Options}
 */
const config = {
  bracketSpacing: true,
  tabWidth: 2,
  semi: true,
  singleQuote: false,
  printWidth: 70,
  singleAttributePerLine: true,
  plugins: ["./node_modules/prettier-plugin-jsdoc/dist/index.js"],
  jsdocSingleLineComment: false,
};

export default config;
`;var he=class he{getName(){return"prettier"}getDevDependencies(){return[new l("prettier-plugin-jsdoc"),new l("prettier")]}getConfigFiles(){return[new u(()=>Sr,".prettierrc.mjs"),new u(()=>_r,".prettierignore")]}packageJsonMiddleware(t){return t.addScript("fix:fmt","prettier -w ./src/**/*.ts"),t.addScript("test:fmt","prettier -c ./src/**/*.ts"),t}beforeWriteFile(t,e){t==="git-hook-tasks.config.json"&&F(e)&&e.hooks["pre-push"].push({name:"Check Formatting",script:"test:fmt"})}};i(he,"PrettierModule");var Wt=he;var we=class we{getName(){return"build-tsc"}packageJsonMiddleware(t){return t.addScript("build","tsc"),t}};i(we,"TscBuilderModule");var Vt=we;var Pr=d(require("fs/promises")),Tr=d(require("path"));var Or=`
import { defineConfig } from "vitest/config";

export default defineConfig({
  test: {
    clearMocks: true,
    dir: "__tests__",
  },
});
`.trimStart();var be=class be{getName(){return"vitest"}async beforeStart(t){let e=Tr.default.resolve(t.projectDir,"__tests__");await Pr.default.mkdir(e)}getDevDependencies(){return[new l("vitest")]}getConfigFiles(){return[new u(()=>Or,"vitest.config.mts"),new u(()=>ct,"tsconfig.json","__tests__")]}packageJsonMiddleware(t){return t.addScript("test:unit","vitest run"),t}beforeWriteFile(t,e){t==="git-hook-tasks.config.json"&&F(e)&&e.hooks["pre-push"].push({name:"Unit Tests",script:"test:unit"})}};i(be,"VitestModule");var Kt=be;var xr=i(()=>`
enableGlobalCache: true

nodeLinker: node-modules

enableMessageNames: false

enableProgressBars: true
`.trim()+`
`,"getYarnRc");var ye=class ye{getName(){return"yarn3"}getConfigFiles(){return[new u(xr,".yarnrc.yml")]}async beforeStart(t){return await t.packageManager.changeVersion("stable")}};i(ye,"YarnBerryModule");var Yt=ye;var Qn=new Ut,Ot=class Ot{constructor(t){this.loadedModules=[Qn];t.moduleList==="default"&&(t.moduleList="dprint,nodepack,vitest");let e=t.moduleList.split(",").filter(n=>!!n);for(let n of e){let o=Ot.Modules.find(s=>s.getName()===n);o||(console.error(`'${n}' is not a valid module`),process.exit(1)),this.loadedModules.includes(o)||this.loadedModules.push(o)}this.ctx={allLoadedModules:this.loadedModules.map(n=>n.getName()),packageManager:t.packageManager,projectName:t.projectName,authorName:t.authorName,projectDir:""}}static listAvailableModules(){return this.Modules.map(t=>t.getName()).join(", ")}getContext(){return this.ctx}async beforeStart(t){this.ctx.projectDir=t,Object.freeze(this.ctx);for(let e of this.loadedModules)e.beforeStart&&await e.beforeStart(this.ctx)}async afterEnd(){for(let t of this.loadedModules)t.afterEnd&&await t.afterEnd(this.ctx)}getDependencies(){return this.loadedModules.flatMap(t=>t.getDependencies?.(this.ctx)).filter(t=>t!=null)}getDevDependencies(){return this.loadedModules.flatMap(t=>t.getDevDependencies?.(this.ctx)).filter(t=>t!=null)}prepareFile(t){let e=this.loadedModules.reduce((n,o)=>o.beforeWriteFile?.(t.filename,n,this.ctx)??n,t.getContent(this.ctx));return{filepath:Er.default.join(t.location,t.filename),content:typeof e=="string"?e:JSON.stringify(e,null,2)}}getConfigFiles(){return this.loadedModules.flatMap(t=>t.getConfigFiles?.(this.ctx)).filter(t=>t!=null).map(t=>this.prepareFile(t))}async applyPackageJsonMiddleware(t){let e=t;for(let n of this.loadedModules)n.packageJsonMiddleware&&(e=await n.packageJsonMiddleware(e,this.ctx));return e}};i(Ot,"ModuleController"),Ot.Modules=[new At,new Vt,new Bt,new Dt,new Ht,new Wt,new kt,new jt,new Kt,new Rt,new Yt];var Ct=Ot;var Fr=Y({char:"p",name:"package-manager",type:"string",default:"yarn",required:!0,description:"Package manager used to install dependencies. (yarn, bun or npm)",validate(r){return["yarn","bun","npm"].includes(r)?"ok":{expected:"yarn | bun | npm",received:r}}}),Mr=Y({char:"n",name:"name",type:"string",required:!0,description:"The name of the project."}),kr=Y({char:"a",name:"author",type:"string",description:"Name of the author."}),Ar=Y({char:"m",name:"modules",type:"string",description:`Comma separated list of modules. Available modules: ${Ct.listAvailableModules()}`});var vt=d(require("fs/promises")),Tt=d(require("path"));var Dr=d(require("child_process")),Ce=d(require("fs/promises")),ve=d(require("path"));var k=i(r=>r.map(t=>t.replace(/\s/g,"\\ ")).join(" "),"parseArgs");var Zn=["run","test","x","repl","install","add","remove","update","link","unlink","pm","build","init","create","upgrade"],T,Rr=(T=class{static getName(){return"bun"}static async execute(t){return new Promise((e,n)=>{Dr.default.exec(t,{cwd:T.cwd},(o,s,a)=>o?n(new Error(a)):e(s))})}static async getVersion(){return""}static async changeVersion(t){}static setCwd(t){T.cwd=t}static wd(){return T.cwd}static async init(){await Ce.default.writeFile(ve.default.resolve(T.cwd,"package.json"),JSON.stringify({packageManager:"bun"},null,2))}static install(t){let e=[];return e.push(t),T.run("add",...e)}static installDev(t){let e=["-d"];return e.push(t),T.run("add",...e)}static async run(t,...e){return T.execute(await T.generateCommand(t,...e))}static async generateCommand(t,...e){let n=ve.default.resolve(T.cwd,"package.json"),o=[];try{let s=await Ce.default.readFile(n,{encoding:"utf-8"}),a=JSON.parse(s);o.push(...Object.keys(a.scripts))}catch{}return o.includes(t)?k(["bun","run",t,...e]):Zn.includes(t)?k(["bun",t,...e]):k(["bun","x",t,...e])}},i(T,"BunPM"),T.cwd=process.cwd(),T);var jr=d(require("child_process")),Ne=d(require("fs/promises")),Ie=d(require("path"));var x,Gr=(x=class{static getName(){return"npm"}static execute(t){return new Promise((e,n)=>{jr.default.exec(t,{cwd:x.cwd},(o,s,a)=>o?n(new Error(a)):e(s))})}static async init(){await Ne.default.writeFile(Ie.default.resolve(x.cwd,"package.json"),JSON.stringify({packageManager:"npm"},null,2))}static async changeVersion(){}static async getVersion(){return""}static setCwd(t){x.cwd=t}static wd(){return x.cwd}static install(t){let e=["npm","install"];return e.push(t),x.execute(k(e))}static installDev(t){let e=["npm","install","-D"];return e.push(t),x.execute(k(e))}static async run(t,...e){return x.execute(await x.generateCommand(t,...e))}static async generateCommand(t,...e){let n=Ie.default.resolve(x.cwd,"package.json"),o=[];try{let s=await Ne.default.readFile(n,{encoding:"utf-8"}),a=JSON.parse(s);o.push(...Object.keys(a.scripts))}catch{}if(o.includes(t)){let s=["npm","run",t];return e.length>0&&(s.push("--"),s.push(...e)),k(s)}return k(["npx",t,...e])}},i(x,"Npm"),x.cwd=process.cwd(),x);var $r=d(require("child_process")),Lr=d(require("fs/promises")),Jr=d(require("path"));var y,Ur=(y=class{static getName(){return"yarn"}static async execute(t){return new Promise((e,n)=>{$r.default.exec(t,{cwd:y.cwd},(o,s,a)=>o?n(new Error(a)):e(s))})}static async getVersion(){return y.version?y.version:(this.version=await y.run("-v"),this.version.trim())}static async changeVersion(t){await y.run("set","version",t),this.version=void 0,await y.getVersion()}static setCwd(t){y.cwd=t}static wd(){return y.cwd}static async init(){let t=await y.getVersion();if(await Lr.default.writeFile(Jr.default.resolve(y.cwd,"package.json"),JSON.stringify({packageManager:`yarn@${t}`},null,2)),t.startsWith("3"))return y.run("init")}static install(t){let e=[];return e.push(t),y.run("add",...e)}static installDev(t){let e=["-D"];return e.push(t),y.run("add",...e)}static async run(t,...e){return y.execute(await y.generateCommand(t,...e))}static async generateCommand(t,...e){return["yarn",t,...e].map(n=>n.replace(" ","\\ ")).join(" ")}},i(y,"Yarn"),y.cwd=process.cwd(),y);var Br=i(r=>{switch(r){case"npm":return Gr;case"yarn":return Ur;case"bun":return Rr}console.error(`Invalid package manager argument: (${r})`),process.exit(1)},"getPackageManager");var Hr=d(require("child_process"));var U=class U{static async execute(t){await new Promise((e,n)=>{Hr.default.exec(t,{cwd:U.cwd},o=>o?n(o):e())})}static setCwd(t){U.cwd=t}static init(t){return U.setCwd(t),U.execute(k(["git","init"]))}static add(...t){t.length===0&&t.push("."),U.execute(k(["git","add",...t]))}};i(U,"Git"),U.cwd=process.cwd();var Pt=U;var Wr=d(require("fs/promises")),Vr=d(require("path"));var Kr=i(async(r,t)=>{P.print(D`
      <span color="lightGreen">Generating:</span>
      <pre> config files</pre>
    `);let e=t.getConfigFiles().map(async n=>{await Wr.default.writeFile(Vr.default.resolve(r,n.filepath),n.content)});return Promise.all(e)},"createConfigFiles");var Se=d(require("fs/promises")),Yr=d(require("path"));var _e=class _e{constructor(t={}){this.packageJson=t}addScript(t,e){Object.defineProperty(this.packageJson.scripts,t,{value:e,enumerable:!0})}addIfNotExists(t,e){t in this.packageJson||Object.defineProperty(this.packageJson,t,{value:e,enumerable:!0})}toJSON(){return JSON.stringify(this.packageJson,null,2)}};i(_e,"PkgJsonFacade");var zt=_e;var zr=i(async(r,t)=>{P.print(D`
    <span color="lightGreen">Generating:</span>
    <pre> package.json file</pre>
  `);let e=t.getContext(),n=Yr.default.resolve(r,"package.json"),o=await Se.default.readFile(n,{encoding:"utf-8"}),s=JSON.parse(o),a=new zt({name:e.projectName,version:"1.0.0",main:"./dist/index.js",keywords:[],repository:{type:"git",url:""},description:"",license:"MIT",author:{name:e.authorName??"",email:""},scripts:{"test:tsc":"tsc --noEmit",prepare:"husky install"}});for(let[c,g]of Object.entries(s))a.addIfNotExists(c,g);return await t.applyPackageJsonMiddleware(a).then(c=>Se.default.writeFile(n,c.toJSON()))},"updatePackageFile");var qr=i(async r=>{let{projectName:t,authorName:e,rootDir:n,packageManager:o,modules:s}=r,a=Br(o.value),c=new Ct({moduleList:s.value??"",packageManager:a,projectName:t.value,authorName:e.value}),g=Tt.default.resolve(n,t.value),h=Tt.default.resolve(g,"src"),I=Tt.default.resolve(g,"dist"),b=Tt.default.resolve(h,"index.ts");(await vt.default.readdir(n)).includes(t.value)&&(console.error(`Directory with the name "${t.value}" already exists.`),process.exit(1)),await vt.default.mkdir(g),a.setCwd(g),await a.init(),await c.beforeStart(g),await Pt.init(g),P.print(D`
    <span color="lightGreen">Generating:</span>
    <pre color="lightYellow"> ${t.value} </pre>
    <span>project files</span>
  `),await Promise.all([vt.default.mkdir(h),vt.default.mkdir(I),Kr(g,c)]),await vt.default.writeFile(b,""),l.setPackageManagerType(a.getName(),await a.getVersion());for(let f of c.getDependencies())P.print(D`
      <span color="lightGreen">Installing dependency:</span>
      <pre> ${f.getFriendlyName()}</pre>
    `),await a.install(f.getInstallName());for(let f of c.getDevDependencies())P.print(D`
      <span color="lightGreen">Installing development dependency:</span>
      <pre> ${f.getFriendlyName()}</pre>
    `),await a.installDev(f.getInstallName());await zr(g,c),await c.afterEnd(),await Pt.add()},"mainAction");var Xn="generate-new-project",ti="Generate a new Typescript project.",ei=Ue.configure(r=>{r.setName(Xn),r.setDescription(ti),r.main(t=>{let e=t.option(Fr),n=t.option(Mr),o=t.option(kr),s=t.option(Ar),a=t.input();return()=>{let c=a.get();if(!c)throw new Error("Output directory not provided.");return qr({rootDir:Qr.default.resolve(c),packageManager:e,projectName:n,authorName:o,modules:s})}})});ei.run();
